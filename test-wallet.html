<!DOCTYPE html>
<html>
<head>
    <title>Wallet Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #111; color: white; }
        button { padding: 10px 20px; margin: 10px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0088ff; }
        #status { margin: 20px 0; padding: 10px; background: #222; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Wallet Connection Test</h1>
    <div id="status">Status: Not connected</div>
    <button onclick="connectWallet()">Connect Wallet</button>
    <button onclick="checkWallet()">Check Wallet</button>
    
    <script>
        async function connectWallet() {
            const status = document.getElementById('status');
            
            if (!window.ethereum) {
                status.innerHTML = 'Status: No wallet found';
                return;
            }
            
            try {
                status.innerHTML = 'Status: Requesting connection...';
                
                const accounts = await window.ethereum.request({
                    method: 'eth_requestAccounts',
                });
                
                if (accounts && accounts.length > 0) {
                    status.innerHTML = `Status: Connected to ${accounts[0]}`;
                } else {
                    status.innerHTML = 'Status: No accounts returned';
                }
            } catch (error) {
                status.innerHTML = `Status: Error - ${error.message}`;
                console.error('Connection error:', error);
            }
        }
        
        async function checkWallet() {
            const status = document.getElementById('status');
            
            if (!window.ethereum) {
                status.innerHTML = 'Status: No wallet found';
                return;
            }
            
            try {
                const accounts = await window.ethereum.request({
                    method: 'eth_accounts',
                });
                
                if (accounts && accounts.length > 0) {
                    status.innerHTML = `Status: Already connected to ${accounts[0]}`;
                } else {
                    status.innerHTML = 'Status: No accounts connected';
                }
            } catch (error) {
                status.innerHTML = `Status: Check error - ${error.message}`;
                console.error('Check error:', error);
            }
        }
        
        // Check on load
        window.addEventListener('load', checkWallet);
    </script>
</body>
</html>