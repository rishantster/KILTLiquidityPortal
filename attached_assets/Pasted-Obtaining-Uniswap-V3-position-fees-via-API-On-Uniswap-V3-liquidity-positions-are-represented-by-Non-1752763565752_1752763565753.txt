Obtaining Uniswap V3 position fees via API
On Uniswap V3, liquidity positions are represented by Non-Fungible Tokens (NFTs). To interact with these positions and access information like accrued fees, you'll primarily use the NonfungiblePositionManager contract. 
Here's how you can access the relevant information and ultimately calculate the fees associated with a Uniswap V3 position:
Identify the position: Each Uniswap V3 liquidity position is uniquely identified by an NFT token ID. You'll need this ID to interact with the position.
Retrieve position data: Using the NFT token ID, you can query the positions function of the NonfungiblePositionManager contract. This function will return key attributes of the position, including:
The token pair (e.g., ETH/USDC)
The fee tier (e.g., 0.05%, 0.3%, or 1%)
The liquidity amount associated with the position
The tick range within which the liquidity is active
Fetch fee growth data: To calculate the accrued fees, you'll need the feeGrowthInside0LastX128 and feeGrowthInside1LastX128 values from the positions function, which indicate the fee growth inside the position at the time of the last update. You'll also need the global fee growth values (feeGrowthGlobal0X128 and feeGrowthGlobal1X128) and the fee growth outside of the position's tick range ( feeGrowth0Low, feeGrowth0Hi, feeGrowth1Low, feeGrowth1Hi), which can be obtained from the pool contract.
Calculate the fees: The fees for a specific position can be calculated by comparing the fee growth inside the position since it was last updated to the current global fee growth and fee growth outside the tick range. This calculation involves some detailed Uniswap V3 math, but resources and code examples are available to assist in performing these calculations programmatically.
Collect the fees: Once the fees are calculated and ready to be collected, you'll need to call the collect function on the NonfungiblePositionManager contract, passing the tokenId and the recipient's address. You can also specify the maximum amounts of each token you wish to collect. This will transfer the accrued fees (in the respective tokens) to the specified recipient's address. 
Uniswap provides comprehensive documentation and guides that walk you through these steps in detail, including code examples using the Uniswap SDK. This guide on collecting fees from the Uniswap documentation is a good starting point. 
Important considerations
Uniswap V3 fees are not automatically reinvested into the pool; they must be manually collected.
When a position's price range moves outside of the current spot price, the liquidity is no longer active and does not earn fees.
You can collect fees without removing liquidity from your position.
The Uniswap V3 protocol also includes a protocol fee mechanism that can be activated via governance and allows for setting a fraction of swap fees to be allocated to the protocol. This protocol fee would affect the amount received by liquidity providers. 
AI responses may include mistakes. For financial advice, consult a professional. Learn more